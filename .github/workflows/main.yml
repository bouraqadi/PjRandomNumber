name: PharoJS for GitHub Pages
run-name: Building GitHub Page using PharoJS App ${{ github.repository }} ðŸš€
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Install Chrome
        uses: browser-actions/setup-chrome@v1
      - name: Install SmalltalkCI
        uses: hpi-swa/setup-smalltalkCI@v1
        id: smalltalkci
        with:
          smalltalk-image: 'Pharo64-11'
      - name: Check out repository code
        uses: actions/checkout@v3
        with:
          fetch-depth: 0 # Depth 0 = clone the repo and all its history as required by Iceberg
      - name: Run SmalltalkCI
        uses: coactions/setup-xvfb@v1
        env: 
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          run: smalltalkci -s ${{ steps.smalltalkci.outputs.smalltalk-image }}
